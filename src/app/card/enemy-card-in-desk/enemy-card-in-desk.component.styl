@import '../styles/card.styl'

@keyframes target {
  0% {
    box-shadow  inset 0 0 3rem 0 rgba(255, 0, 5, 0.9)
  }
  50% {
    box-shadow  inset 0 0 3rem 0 rgba(255, 0, 5, 0.4)
  }
  100% {
    box-shadow  inset 0 0 3rem 0 rgba(255, 0, 5, 0.9)
  }
}

@keyframes enemy-card-damage-burn {
  0% {
    transform translate3d(0,0,0) scale(1)
    opacity 1
  }

  30% {
    transform  scale(1.3)
    opacity 1
  }

  70% {
    transform  scale(1.3)
    opacity 1
  }

  100% {
    transform  scale(2)
    opacity 0
  }
}

@keyframes enemy-put-in-desk {
  30% {
    transform translate3d(-80%, -100%, 0) scale(1.5) rotateY(130deg)
    box-shadow -1rem 1rem 1rem 0.1rem rgba(0, 0, 0, 0.5)
  }

  60% {
    transform translate3d(-100%, -80%, 0) scale(1.7)  rotateY(130deg)
    box-shadow -1rem 1rem 1rem 0.1rem rgba(0, 0, 0, 0.3)
  }


  80% {
    transform translate3d(5%, -5%, 0) scale(0.8) rotateZ(10deg) rotateY(150deg)
    box-shadow -0.2rem 0.2rem 0.5rem 0.1rem rgba(0, 0, 0, 0.6)
  }

  90% {
    transform translate3d(0, 0, 0) scale(1.05) rotateZ(-15deg)  rotateY(180deg)
    box-shadow 0rem 0rem 1.5rem 0.1rem rgba(0, 0, 0, 0.8)
  }
  95% {
    transform translate3d(0, 0, 0) scale(1.1) rotateZ(9deg) rotateY(180deg)
    box-shadow 0rem 0rem 1.5rem 0.1rem rgba(0, 0, 0, 0.8)
  }

  100% {
    transform translate3d(0, 0, 0) scale(1) rotateY(180deg)
    box-shadow 0 0 0 0 black
  }
}

:host
  host()
  padding 1.6rem
  margin -0.6rem -1.2rem -3rem -1.2rem
  position relative
  perspective 800px
  z-index 40000

  .enemy-card
    transition all 0.1s ease
    display block
    width 100%
    height 100%
    position relative
    transform-style preserve-3d
    box-shadow 0 0 0 0 rgba(0, 0, 0, 0.7)

    &--damage
      color #ff8056
      damage-burn-element()
      top -3rem
      left 50%
      margin-left -1.25rem
      animation enemy-card-damage-burn 1.2s ease-out forwards

    &_in-attack
      selected();
      animation: card-in-attack 10.4s infinite ease-in-out;

    &_attack-mode
      cursor url('/assets/attack.cur'), auto
      &:hover .enemy-card--face
        animation: target 1.4s infinite ease-in-out


    &_flipped
      transform translate3d(0, 0, 0) scale(1)

      box-shadow 0 0 0 0 black
      .enemy-card--face
        transform rotateY(0deg)
      .enemy-card--deck
        display none
        //transform rotate(180deg)

    &_putted-to-desk
      z-index 40000
      transform translate3d(20%, -300%, 0) scale(1.2) rotateY(30deg) rotateZ(20deg)
      animation enemy-put-in-desk 0.9s ease-in forwards

    &--face, &--deck
      display: block
      overflow hidden
      backface-visibility hidden
      position absolute
      border-radius 0.4rem
      box-shadow inset 0 0 0.3rem 0.1rem #ee7c00

    &--face
      transform: rotateY(180deg)

